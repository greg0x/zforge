---
description: Development environment setup and native workflow
globs: ["Procfile", "config/*.toml", "dev", "mise.toml"]
alwaysApply: false
---

# Development Environment Guidelines

## CLI Commands

Always use `./dev` for service and git operations:

```bash
# Services
./dev up        # Start services
./dev stop      # Stop services
./dev restart   # Restart services
./dev status    # Check health
./dev logs      # Follow logs
./dev test      # Run integration tests

# Git (multi-repo)
./dev git status          # Status across all repos
./dev git branch <name>   # Create feature branch
./dev git commit <msg>    # Commit across submodules
./dev git push            # Push all repos
./dev git sync            # Fetch upstream
```

**Never use raw overmind/git commands** - `./dev` handles multi-repo coordination.

## Network Configuration

**Default: Regtest** - For protocol development
- No sync required (instant, on-demand blocks)
- Perfect for testing protocol changes

## Local Patches Active

All services use local submodule versions (no crates.io):
- `zaino` → `../orchard`, `../librustzcash`
- `zebra` → `../orchard`, `../librustzcash` (via Cargo.toml patches)

**Changes propagate immediately** - just restart:
```bash
# After editing orchard/ or librustzcash/
./dev restart
```

## For AI Agents

When making protocol changes:
1. Start feature: `./dev git branch my-feature`
2. Edit files in `orchard/` or `librustzcash/`
3. Restart: `./dev restart`
4. Test: `./dev test`
5. Commit: `./dev git commit "description"`
6. Push: `./dev git push`

**Never:**
- Use raw `git` commands in submodules (use `./dev git`)
- Use raw `overmind` commands (use `./dev up/stop/restart`)
- Change `network` in config to Mainnet/Testnet (Regtest is intentional)
